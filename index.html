<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScriptVault - Key Management System</title>
  <script>
    console.warn = function() {};
  </script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, createElement: h } = React;
// Icons Component
const Icon = ({ name, size = 24, className = "" }) => {
  const icons = {
    ShoppingCart: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg>,
    Key: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>,
    Lock: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>,
    MessageCircle: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>,
    Shield: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>,
    LogOut: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>,
    Check: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="20 6 9 17 4 12"/></svg>,
    X: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
    Settings: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m9-9h-6M7 12H1m16.24-7.76l-4.24 4.24m-5.66 5.66L2.76 18.76m0-13.52l4.24 4.24m5.66 5.66l4.24 4.24"/></svg>,
    AlertCircle: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>,
    Search: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>,
    Trash2: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>,
    Snowflake: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="2" y1="12" x2="22" y2="12"/><line x1="12" y1="2" x2="12" y2="22"/><path d="m20 16-4-4 4-4"/><path d="m4 8 4 4-4 4"/><path d="m16 4-4 4-4-4"/><path d="m8 20 4-4 4 4"/></svg>,
    Play: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
    Code: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>,
    Zap: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
    Users: <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
  };
  return icons[name] || null;
};

function KeyManagementPanel() {
  const [activeTab, setActiveTab] = useState('login');
  const [cart, setCart] = useState([]);
  const [isAuthenticated, setIsAuthenticated] = useState(false);
  const [userInfo, setUserInfo] = useState(null);
  const [showNotification, setShowNotification] = useState(false);
  const [notificationMsg, setNotificationMsg] = useState('');
  const [isOwner, setIsOwner] = useState(false);
  const [keys, setKeys] = useState([]);
  const [userKey, setUserKey] = useState(null);
  const [redeemCode, setRedeemCode] = useState('');
  const [newKeyProduct, setNewKeyProduct] = useState('');
  const [searchKey, setSearchKey] = useState('');
  
  const OWNER_ID = '1296635789639421994';

      // ×‘×“×™×§×” ×× ×—×–×¨× ×• ×-Discord
    React.useEffect(() => {
      const hash = window.location.hash.substring(1);
      const params = new URLSearchParams(hash);
      const token = params.get('access_token');
      
      if (token) {
        // ×§×‘×œ×ª ××™×“×¢ ×¢×œ ×”××©×ª××© ×-Discord
        fetch('https://discord.com/api/users/@me', {
          headers: {
            Authorization: `Bearer ${token}`
          }
        })
        .then(res => res.json())
        .then(user => {
          setUserInfo(user);
          setIsAuthenticated(true);
          
          if (user.id === OWNER_ID) {
            setIsOwner(true);
          }
          
          setActiveTab('shop');
          showNotif('×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×”! ğŸ‰');
          
          // × ×™×§×•×™ ×”-URL
          window.history.replaceState({}, document.title, window.location.pathname);
        })
        .catch(err => {
          console.error('×©×’×™××” ×‘×—×™×‘×•×¨ ×œ×“×™×¡×§×•×¨×“:', err);
          showNotif('×©×’×™××” ×‘×—×™×‘×•×¨! âŒ');
        });
      }
    }, []);
  
  const scripts = [
    {
      id: 1,
      name: 'Advanced Police System',
      price: 299,
      category: 'Emergency',
      description: '××¢×¨×›×ª ××©×˜×¨×” ××ª×§×“××ª ×¢× ×¨×“×™×•, ×“×™×•×•×—×™× ×•-MDT',
      features: ['×¨×“×™×• ××©×˜×¨×ª×™', '××¢×¨×›×ª ×“×™×•×•×—×™×', 'MDT ××œ×', '×ª××™×›×” 24/7'],
      rating: 4.9
    },
    {
      id: 2,
      name: 'Banking System Pro',
      price: 199,
      category: 'Economy',
      description: '××¢×¨×›×ª ×‘× ×§××•×ª ××œ××” ×¢× ATM ×•×”×¢×‘×¨×•×ª',
      features: ['×—×©×‘×•× ×•×ª ×‘× ×§', '×›×¨×˜×™×¡×™ ××©×¨××™', '×”×¢×‘×¨×•×ª ×‘× ×§××™×•×ª', '×¨×™×‘×™×ª ××•×˜×•××˜×™×ª'],
      rating: 4.8
    },
    {
      id: 3,
      name: 'Vehicle Customization',
      price: 149,
      category: 'Vehicles',
      description: '×”×ª×××” ××™×©×™×ª ×©×œ ×¨×›×‘×™× ×¢× ×××•×ª ××¤×©×¨×•×™×•×ª',
      features: ['×× ×•×¢ ×”×ª×××”', '×¦×‘×™×¢×” ××ª×§×“××ª', '×©×“×¨×•×’×™ ×‘×™×¦×•×¢×™×', '× ×™××•×Ÿ'],
      rating: 4.7
    },
    {
      id: 4,
      name: 'Housing System Elite',
      price: 249,
      category: 'Housing',
      description: '××¢×¨×›×ª ×“×™×•×¨ ××ª×§×“××ª ×¢× ×¨×™×”×•×˜ ×•×©×“×¨×•×’×™×',
      features: ['×‘×ª×™× ××•×ª×××™×', '××¢×¨×›×ª ×¨×™×”×•×˜', '××¢×¨×›×ª ××¤×ª×—×•×ª', '×©×“×¨×•×’×™×'],
      rating: 5.0
    },
    {
      id: 5,
      name: 'Inventory System Plus',
      price: 179,
      category: 'Core',
      description: '××™× ×•×•× ×˜×•×¨×™ ××ª×§×“× ×¢× UI ××•×“×¨× ×™',
      features: ['×’×¨×™×¨×” ×•×©×—×¨×•×¨', '××©×§×œ ××•×˜×•××˜×™', '×§×˜×’×•×¨×™×•×ª', '×—×™×¤×•×© ××”×™×¨'],
      rating: 4.9
    },
    {
      id: 6,
      name: 'Gang Territory Wars',
      price: 329,
      category: 'Gangs',
      description: '××¢×¨×›×ª ×›× ×•×¤×™×•×ª ×•×˜×¨×™×˜×•×¨×™×•×ª ×¢× ××œ×—××•×ª',
      features: ['×˜×¨×™×˜×•×¨×™×•×ª', '××œ×—××•×ª ×›× ×•×¤×™×•×ª', '×“×™×¨×•×’×™×', '××©×™××•×ª'],
      rating: 4.6
    }
  ];

  const generateKey = () => {
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
    let key = '';
    for (let i = 0; i < 4; i++) {
      for (let j = 0; j < 4; j++) {
        key += chars[Math.floor(Math.random() * chars.length)];
      }
      if (i < 3) key += '-';
    }
    return key;
  };
const connectDiscord = () => {
  const CLIENT_ID = 'Ov23liIcWU5ehZokm70H';
  const REDIRECT_URI = encodeURIComponent(window.location.origin + '/');
  const SCOPE = 'identify';
  
  const discordAuthUrl = `https://discord.com/api/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&response_type=token&scope=${SCOPE}`;
  
  window.location.href = discordAuthUrl;
};

  const logout = () => {
    setIsAuthenticated(false);
    setUserInfo(null);
    setIsOwner(false);
    setActiveTab('login');
    setCart([]);
    setUserKey(null);
    showNotif('×”×ª× ×ª×§×ª ×‘×”×¦×œ×—×”! ğŸ‘‹');
  };

  const addToCart = (script) => {
    if (!cart.find(item => item.id === script.id)) {
      setCart([...cart, script]);
      showNotif('× ×•×¡×£ ×œ×¢×’×œ×”! ğŸ›’');
    } else {
      showNotif('×›×‘×¨ ×‘×¢×’×œ×”! âš ï¸');
    }
  };

  const removeFromCart = (id) => {
    setCart(cart.filter(item => item.id !== id));
    showNotif('×”×•×¡×¨ ××”×¢×’×œ×” ğŸ—‘ï¸');
  };

  const showNotif = (msg) => {
    setNotificationMsg(msg);
    setShowNotification(true);
    setTimeout(() => setShowNotification(false), 3000);
  };

  const checkout = () => {
    if (cart.length === 0) {
      showNotif('×”×¢×’×œ×” ×¨×™×§×”! ğŸ›’');
      return;
    }
    
    const newKeys = cart.map(item => {
      const keyCode = generateKey();
      return {
        code: keyCode,
        product: item.name,
        price: item.price,
        userId: userInfo.id,
        redeemed: false,
        createdAt: Date.now(),
        redeemedAt: null,
        status: 'active'
      };
    });
    
    setKeys([...keys, ...newKeys]);
    showNotif(`×ª×©×œ×•× ×‘×•×¦×¢! ×§×™×‘×œ×ª ${newKeys.length} Keys ğŸ‰`);
    setCart([]);
    setActiveTab('mykeys');
  };

  const redeemKey = () => {
    const keyToRedeem = keys.find(k => k.code === redeemCode.toUpperCase());
    
    if (!keyToRedeem) {
      showNotif('Key ×œ× ×ª×§×™×Ÿ! âŒ');
      return;
    }
    
    if (keyToRedeem.status === 'frozen') {
      showNotif('Key ××•×§×¤×! â„ï¸');
      return;
    }
    
    if (keyToRedeem.redeemed) {
      showNotif('Key ×›×‘×¨ ××•××©! âŒ');
      return;
    }
    
    if (keyToRedeem.userId !== userInfo.id && keyToRedeem.userId !== null) {
      showNotif('Key ×œ× ×©×™×™×š ×œ×š! âŒ');
      return;
    }
    
    const updatedKeys = keys.map(k => 
      k.code === redeemCode.toUpperCase() 
        ? { ...k, redeemed: true, redeemedAt: Date.now(), userId: userInfo.id }
        : k
    );
    
    setKeys(updatedKeys);
    setUserKey(keyToRedeem);
    showNotif('Key ××•××© ×‘×”×¦×œ×—×”! âœ…');
    setRedeemCode('');
  };

  const createKey = () => {
    if (!newKeyProduct.trim()) {
      showNotif('×”×–×Ÿ ×©× ××•×¦×¨! âŒ');
      return;
    }
    
    const keyCode = generateKey();
    const newKey = {
      code: keyCode,
      product: newKeyProduct,
      price: 0,
      userId: null,
      redeemed: false,
      createdAt: Date.now(),
      redeemedAt: null,
      status: 'active'
    };
    
    setKeys([...keys, newKey]);
    showNotif(`Key × ×•×¦×¨: ${keyCode} ğŸ”‘`);
    setNewKeyProduct('');
  };

  const freezeKey = (keyCode) => {
    const updatedKeys = keys.map(k => 
      k.code === keyCode ? { ...k, status: 'frozen' } : k
    );
    setKeys(updatedKeys);
    showNotif('Key ×”×•×§×¤×! â„ï¸');
  };

  const unfreezeKey = (keyCode) => {
    const updatedKeys = keys.map(k => 
      k.code === keyCode ? { ...k, status: 'active' } : k
    );
    setKeys(updatedKeys);
    showNotif('Key ×”×•×¤×©×¨! âœ…');
  };

  const deleteKey = (keyCode) => {
    setKeys(keys.filter(k => k.code !== keyCode));
    showNotif('Key × ××—×§! ğŸ—‘ï¸');
  };

  const totalPrice = cart.reduce((sum, item) => sum + item.price, 0);
  const userKeys = keys.filter(k => k.userId === userInfo?.id && k.redeemed);

  if (!isAuthenticated) {
    return (
      <div className="min-h-screen bg-black text-white flex items-center justify-center p-4">
        <div className="max-w-md w-full">
          <div className="text-center mb-12">
            <h1 className="text-6xl font-black mb-4 text-white">
              ScriptVault
            </h1>
            <p className="text-xl text-gray-400">×”×—× ×•×ª ×”××ª×§×“××ª ×‘×™×•×ª×¨ ×œ×¡×§×¨×™×¤×˜×™×</p>
          </div>

          <div className="glass-effect rounded-2xl p-8 animate-fade-in">
            <div className="text-center mb-8">
              <Icon name="Lock" size={64} className="mx-auto text-white mb-6" />
              <h2 className="text-3xl font-bold mb-2">×›× ×™×¡×” ×œ××ª×¨</h2>
              <p className="text-gray-400">×”×ª×—×‘×¨ ×¢× Discord ×›×“×™ ×œ×”××©×™×š</p>
            </div>

            <button
              onClick={connectDiscord}
              className="w-full bg-white text-black hover:bg-gray-200 py-4 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-3"
            >
              <Icon name="MessageCircle" size={24} />
              ×”×ª×—×‘×¨ ×¢× Discord
            </button>

            <div className="mt-6 text-center text-sm text-gray-500">
              <p>ğŸ”’ ×—×™×‘×•×¨ ×××•×‘×˜×— ×¢× Discord OAuth2</p>
              <p className="mt-2">ğŸ“ ××—×¨×™ ×”×”×ª×—×‘×¨×•×ª ×ª×•×›×œ ×œ×§× ×•×ª ×•×œ×××© Keys</p>
            </div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-black text-white p-4">
      {showNotification && (
        <div className="notification bg-white text-black px-6 py-3 rounded-lg shadow-2xl">
          <p className="font-bold">{notificationMsg}</p>
        </div>
      )}

      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="flex justify-between items-center mb-6">
          <div>
            <h1 className="text-4xl font-black text-white">
              ScriptVault
            </h1>
            <p className="text-gray-400">×‘×¨×•×š ×”×‘×, {userInfo.username}!</p>
          </div>
          <button
            onClick={logout}
            className="bg-white text-black hover:bg-gray-200 px-4 py-2 rounded-lg font-bold transition-all flex items-center gap-2"
          >
            <Icon name="LogOut" size={20} />
            ×”×ª× ×ª×§
          </button>
        </div>

        {/* Navigation */}
        <div className="flex gap-4 mb-6 glass-effect p-2 rounded-2xl flex-wrap">
          <button
            onClick={() => setActiveTab('shop')}
            className={`flex-1 min-w-[120px] py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${
              activeTab === 'shop' 
                ? 'bg-white text-black' 
                : 'bg-transparent text-white hover:bg-gray-800'
            }`}
          >
            <Icon name="ShoppingCart" size={20} />
            ×—× ×•×ª
          </button>
          <button
            onClick={() => setActiveTab('redeem')}
            className={`flex-1 min-w-[120px] py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${
              activeTab === 'redeem' 
                ? 'bg-white text-black' 
                : 'bg-transparent text-white hover:bg-gray-800'
            }`}
          >
            <Icon name="Key" size={20} />
            ××™××•×© Key
          </button>
          <button
            onClick={() => setActiveTab('mykeys')}
            className={`flex-1 min-w-[120px] py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${
              activeTab === 'mykeys' 
                ? 'bg-white text-black' 
                : 'bg-transparent text-white hover:bg-gray-800'
            }`}
          >
            <Icon name="Shield" size={20} />
            ×”-Keys ×©×œ×™
            {userKeys.length > 0 && (
              <span className="bg-white text-black text-xs rounded-full w-6 h-6 flex items-center justify-center">
                {userKeys.length}
              </span>
            )}
          </button>
          <button
            onClick={() => setActiveTab('cart')}
            className={`flex-1 min-w-[120px] py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 relative ${
              activeTab === 'cart' 
                ? 'bg-white text-black' 
                : 'bg-transparent text-white hover:bg-gray-800'
            }`}
          >
            <Icon name="ShoppingCart" size={20} />
            ×¢×’×œ×”
            {cart.length > 0 && (
              <span className="bg-white text-black text-xs rounded-full w-6 h-6 flex items-center justify-center">
                {cart.length}
              </span>
            )}
          </button>
          {isOwner && (
            <button
              onClick={() => setActiveTab('admin')}
              className={`flex-1 min-w-[120px] py-3 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 ${
                activeTab === 'admin' 
                  ? 'bg-white text-black' 
                  : 'bg-transparent text-white hover:bg-gray-800'
              }`}
            >
              <Icon name="Settings" size={20} />
              × ×™×”×•×œ
              <span className="bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full">OWNER</span>
            </button>
          )}
        </div>

        {/* Shop Tab */}
        {activeTab === 'shop' && (
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {scripts.map(script => (
              <div key={script.id} className="card hover-lift animate-slide-in">
                <div className="flex justify-between items-start mb-4">
                  <div>
                    <span className="text-xs bg-gray-800 text-white px-3 py-1 rounded-full">{script.category}</span>
                    <h3 className="text-2xl font-bold mt-2">{script.name}</h3>
                  </div>
                  <Icon name="Code" size={24} className="text-white" />
                </div>
                
                <p className="text-gray-400 mb-4">{script.description}</p>
                
                <div className="space-y-2 mb-4">
                  {script.features.map((feature, idx) => (
                    <div key={idx} className="flex items-center gap-2 text-sm">
                      <Icon name="Zap" size={14} className="text-white" />
                      <span className="text-gray-300">{feature}</span>
                    </div>
                  ))}
                </div>

                <div className="flex items-center gap-2 mb-4">
                  <div className="flex">
                    {[...Array(5)].map((_, i) => (
                      <span key={i} className={i < Math.floor(script.rating) ? 'text-white' : 'text-gray-600'}>â˜…</span>
                    ))}
                  </div>
                  <span className="text-sm text-gray-400">{script.rating}</span>
                </div>

                <div className="flex justify-between items-center">
                  <span className="text-3xl font-black text-white">
                    â‚ª{script.price}
                  </span>
                  <button
                    onClick={() => addToCart(script)}
                    className="bg-white text-black hover:bg-gray-200 px-6 py-2 rounded-xl font-bold transition-all"
                  >
                    ×”×•×¡×£ ×œ×¢×’×œ×”
                  </button>
                </div>
              </div>
            ))}
          </div>
        )}

        {/* Redeem Tab */}
        {activeTab === 'redeem' && (
          <div className="max-w-2xl mx-auto">
            <div className="glass-effect rounded-2xl p-8 animate-fade-in">
              <div className="text-center mb-8">
                <Icon name="Key" size={64} className="mx-auto text-white mb-4" />
                <h2 className="text-3xl font-bold mb-2">××™××•×© Key</h2>
                <p className="text-gray-400">×”×–×Ÿ ××ª ×”×§×•×“ ×©×§×™×‘×œ×ª ×›×“×™ ×œ×××© ××ª ×”××•×¦×¨</p>
              </div>

              <div className="space-y-6">
                <div>
                  <label className="flex items-center gap-2 mb-2 text-white font-bold">
                    <Icon name="Key" size={20} />
                    ×§×•×“ Key (XXXX-XXXX-XXXX-XXXX)
                  </label>
                  <input
                    type="text"
                    value={redeemCode}
                     onChange={(e) => setRedeemCode(e.target.value.toUpperCase())}
                    placeholder="×”×–×Ÿ ××ª ×”×§×•×“..."
                    className="w-full bg-gray-800 border border-gray-700 text-white rounded-xl px-4 py-3 focus:border-white transition-all font-mono text-lg"
                    maxLength={19}
                  />
                </div>

                <button
                  onClick={redeemKey}
                  className="w-full bg-white text-black hover:bg-gray-200 py-4 rounded-xl font-bold text-lg transition-all flex items-center justify-center gap-2"
                >
                  <Icon name="Check" size={24} />
                  ××™××•×© Key
                </button>

                <div className="bg-gray-800 border border-gray-700 rounded-xl p-4 flex items-start gap-3">
                  <Icon name="AlertCircle" size={24} className="text-white flex-shrink-0 mt-1" />
                  <div className="text-sm">
                    <p className="font-bold text-white mb-1">ğŸ’¡ ×˜×™×¤:</p>
                    <p className="text-gray-300">××—×¨×™ ××™××•×© ×”-Key, ×”××•×¦×¨ ×™×•×¤×™×¢ ×‘"×”-Keys ×©×œ×™" ×•×ª×•×›×œ ×œ×”×©×ª××© ×‘×• ×‘×©×¨×ª CFX ×©×œ×š.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* My Keys Tab */}
        {activeTab === 'mykeys' && (
          <div className="max-w-4xl mx-auto">
            <div className="glass-effect rounded-2xl p-8 animate-fade-in">
              <h2 className="text-3xl font-bold mb-6 flex items-center gap-3">
                <Icon name="Shield" className="text-white" />
                ×”-Keys ×©×œ×™
              </h2>

              {userKeys.length === 0 ? (
                <div className="text-center py-12">
                  <Icon name="Key" size={64} className="mx-auto text-gray-600 mb-4" />
                  <p className="text-xl text-gray-400">××™×Ÿ ×œ×š Keys ×××•××©×™× ×¢×“×™×™×Ÿ</p>
                  <p className="text-gray-500 mt-2">×§× ×” ××•×¦×¨×™× ×•××××© ××•×ª× ×›×“×™ ×œ×¨××•×ª ××•×ª× ×›××Ÿ</p>
                </div>
              ) : (
                <div className="space-y-4">
                  {userKeys.map(key => (
                    <div key={key.code} className="bg-gray-800 rounded-xl p-6 hover:bg-gray-750 transition-all border border-gray-700">
                      <div className="flex justify-between items-start mb-4">
                        <div>
                          <h3 className="text-xl font-bold text-white">{key.product}</h3>
                          <p className="text-sm text-gray-400 mt-1">××•××© ×‘-{new Date(key.redeemedAt).toLocaleDateString('he-IL')}</p>
                        </div>
                        <span className={`px-3 py-1 rounded-full text-sm font-bold ${
                          key.status === 'frozen' ? 'bg-blue-500 text-white' : 'bg-green-500 text-white'
                        }`}>
                          {key.status === 'frozen' ? 'â„ï¸ ××•×§×¤×' : 'âœ… ×¤×¢×™×œ'}
                        </span>
                      </div>
                      
                      <div className="bg-black rounded-lg p-4 border border-gray-700">
                        <p className="text-xs text-gray-400 mb-2">ğŸ”‘ ×”×§×•×“ ×©×œ×š:</p>
                        <p className="font-mono text-lg text-white select-all">{key.code}</p>
                      </div>

                      {key.status === 'active' && (
                        <div className="mt-4 bg-green-900 bg-opacity-20 border border-green-500 rounded-lg p-3">
                          <p className="text-sm text-green-400">
                            âœ… ×”-Key ×¤×¢×™×œ ×•××•×›×Ÿ ×œ×©×™××•×©! ×”×¢×ª×§ ××ª ×”×§×•×“ ×•×”×“×‘×§ ××•×ª×• ×‘×§×•×‘×¥ ×”-config ×©×œ ×”×¡×§×¨×™×¤×˜.
                          </p>
                        </div>
                      )}
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>
        )}

        {/* Cart Tab */}
        {activeTab === 'cart' && (
          <div className="max-w-4xl mx-auto">
            <div className="glass-effect rounded-2xl p-8 animate-fade-in">
              <h2 className="text-3xl font-bold mb-6 flex items-center gap-3">
                <Icon name="ShoppingCart" className="text-white" />
                ×”×¢×’×œ×” ×©×œ×™
              </h2>

              {cart.length === 0 ? (
                <div className="text-center py-12">
                  <Icon name="ShoppingCart" size={64} className="mx-auto text-gray-600 mb-4" />
                  <p className="text-xl text-gray-400">×”×¢×’×œ×” ×¨×™×§×”</p>
                </div>
              ) : (
                <>
                  <div className="space-y-4 mb-6">
                    {cart.map(item => (
                      <div key={item.id} className="bg-gray-800 rounded-xl p-4 flex justify-between items-center hover:bg-gray-750 transition-all">
                        <div>
                          <h3 className="font-bold text-lg text-white">{item.name}</h3>
                          <p className="text-sm text-gray-400">{item.category}</p>
                        </div>
                        <div className="flex items-center gap-4">
                          <span className="text-2xl font-bold text-white">â‚ª{item.price}</span>
                          <button
                            onClick={() => removeFromCart(item.id)}
                            className="bg-red-600 hover:bg-red-700 p-2 rounded-lg transition-all"
                          >
                            <Icon name="X" size={20} />
                          </button>
                        </div>
                      </div>
                    ))}
                  </div>

                  <div className="border-t border-gray-700 pt-6">
                    <div className="flex justify-between items-center mb-6">
                      <span className="text-2xl font-bold text-white">×¡×”"×›:</span>
                      <span className="text-4xl font-black text-white">
                        â‚ª{totalPrice}
                      </span>
                    </div>

                    <button
                      onClick={checkout}
                      className="w-full bg-white text-black hover:bg-gray-200 py-4 rounded-xl font-bold text-xl transition-all flex items-center justify-center gap-2"
                    >
                      <Icon name="Zap" size={24} />
                      ×”×©×œ× ×¨×›×™×©×”
                    </button>
                  </div>
                </>
              )}
            </div>
          </div>
        )}

        {/* Admin Tab - ×¨×§ ×œ-Owner */}
        {activeTab === 'admin' && isOwner && (
          <div className="max-w-6xl mx-auto space-y-6">
            <div className="glass-effect rounded-2xl p-8 animate-fade-in">
              <h2 className="text-3xl font-bold mb-6 flex items-center gap-3">
                <Icon name="Settings" className="text-white" />
                ×¤×× ×œ × ×™×”×•×œ Keys
              </h2>

              <div className="bg-yellow-900 bg-opacity-20 border border-yellow-500 rounded-xl p-4 mb-6 flex items-start gap-3">
                <Icon name="AlertCircle" size={24} className="text-yellow-400 flex-shrink-0 mt-1" />
                <div className="text-sm">
                  <p className="font-bold text-yellow-400 mb-1">âš ï¸ ×¤×× ×œ Owner ×‘×œ×‘×“!</p>
                  <p className="text-gray-300">×›××Ÿ ×ª×•×›×œ ×œ× ×”×œ ××ª ×›×œ ×”-Keys: ×œ×™×¦×•×¨, ×œ×”×§×¤×™×, ×œ××—×•×§ ×•×œ×¦×¤×•×ª ×‘××™×“×¢.</p>
                </div>
              </div>

              {/* ×™×¦×™×¨×ª Key */}
              <div className="bg-gray-800 rounded-xl p-6 mb-6">
                <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                  <Icon name="Key" className="text-white" />
                  ×™×¦×™×¨×ª Key ×—×“×©
                </h3>
                <div className="flex gap-4">
                  <input
                    type="text"
                    value={newKeyProduct}
                    onChange={(e) => setNewKeyProduct(e.target.value)}
                    placeholder="×©× ×”××•×¦×¨..."
                    className="flex-1 bg-gray-900 border border-gray-700 text-white rounded-xl px-4 py-3 focus:border-white transition-all"
                  />
                  <button
                    onClick={createKey}
                    className="bg-white text-black hover:bg-gray-200 px-6 py-3 rounded-xl font-bold transition-all flex items-center gap-2"
                  >
                    <Icon name="Check" size={20} />
                    ×¦×•×¨ Key
                  </button>
                </div>
              </div>

              {/* ×¡×˜×˜×™×¡×˜×™×§×•×ª */}
              <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                <div className="bg-blue-900 bg-opacity-20 border border-blue-500 rounded-xl p-4">
                  <div className="flex items-center gap-3 mb-2">
                    <Icon name="Key" size={24} className="text-blue-400" />
                    <span className="text-sm text-gray-400">×¡×”"×› Keys</span>
                  </div>
                  <p className="text-3xl font-black text-blue-400">{keys.length}</p>
                </div>

                <div className="bg-green-900 bg-opacity-20 border border-green-500 rounded-xl p-4">
                  <div className="flex items-center gap-3 mb-2">
                    <Icon name="Check" size={24} className="text-green-400" />
                    <span className="text-sm text-gray-400">Keys ×××•××©×™×</span>
                  </div>
                  <p className="text-3xl font-black text-green-400">{keys.filter(k => k.redeemed).length}</p>
                </div>

                <div className="bg-purple-900 bg-opacity-20 border border-purple-500 rounded-xl p-4">
                  <div className="flex items-center gap-3 mb-2">
                    <Icon name="Zap" size={24} className="text-purple-400" />
                    <span className="text-sm text-gray-400">Keys ×¤×¢×™×œ×™×</span>
                  </div>
                  <p className="text-3xl font-black text-purple-400">{keys.filter(k => !k.redeemed).length}</p>
                </div>

                <div className="bg-blue-900 bg-opacity-20 border border-blue-500 rounded-xl p-4">
                  <div className="flex items-center gap-3 mb-2">
                    <Icon name="Snowflake" size={24} className="text-blue-400" />
                    <span className="text-sm text-gray-400">Keys ××•×§×¤××™×</span>
                  </div>
                  <p className="text-3xl font-black text-blue-400">{keys.filter(k => k.status === 'frozen').length}</p>
                </div>
              </div>

              {/* ×—×™×¤×•×© */}
              <div className="mb-6">
                <div className="relative">
                  <Icon name="Search" size={20} className="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400" />
                  <input
                    type="text"
                    value={searchKey}
                    onChange={(e) => setSearchKey(e.target.value)}
                    placeholder="×—×¤×© Key..."
                    className="w-full bg-gray-800 border border-gray-700 text-white rounded-xl px-4 py-3 pr-12 focus:border-white transition-all"
                  />
                </div>
              </div>

              {/* ×¨×©×™××ª Keys */}
              <div className="bg-gray-800 rounded-xl p-6">
                <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                  <Icon name="Users" className="text-white" />
                  ×›×œ ×”-Keys ({keys.filter(k => !searchKey || k.code.includes(searchKey.toUpperCase()) || k.product.toLowerCase().includes(searchKey.toLowerCase())).length})
                </h3>

                {keys.length === 0 ? (
                  <div className="text-center py-8">
                    <Icon name="Key" size={48} className="mx-auto text-gray-600 mb-4" />
                    <p className="text-gray-400">××™×Ÿ Keys ×‘××¢×¨×›×ª</p>
                  </div>
                ) : (
                  <div className="space-y-3 max-h-[600px] overflow-y-auto">
                    {keys
                      .filter(k => !searchKey || k.code.includes(searchKey.toUpperCase()) || k.product.toLowerCase().includes(searchKey.toLowerCase()))
                      .map(key => (
                      <div key={key.code} className="bg-gray-900 rounded-xl p-4 hover:bg-gray-850 transition-all border border-gray-700">
                        <div className="flex justify-between items-start mb-3">
                          <div className="flex-1">
                            <div className="flex items-center gap-3 mb-2">
                              <span className="font-mono text-lg font-bold text-white">{key.code}</span>
                              <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                key.status === 'frozen' 
                                  ? 'bg-blue-500 text-white' 
                                  : key.redeemed 
                                    ? 'bg-green-500 text-white' 
                                    : 'bg-yellow-500 text-black'
                              }`}>
                                {key.status === 'frozen' ? 'â„ï¸ ××•×§×¤×' : key.redeemed ? 'âœ… ××•××©' : 'ğŸŸ¡ ×××ª×™×Ÿ'}
                              </span>
                            </div>
                            <p className="text-sm text-gray-300">{key.product}</p>
                            <div className="flex gap-4 mt-2 text-xs text-gray-400">
                              <span>× ×•×¦×¨: {new Date(key.createdAt).toLocaleDateString('he-IL')}</span>
                              {key.redeemed && <span>××•××©: {new Date(key.redeemedAt).toLocaleDateString('he-IL')}</span>}
                              {key.userId && <span>User ID: {key.userId}</span>}
                            </div>
                          </div>

                          <div className="flex gap-2">
                            <button
                              onClick={() => navigator.clipboard.writeText(key.code).then(() => showNotif('×”×•×¢×ª×§! ğŸ“‹'))}
                              className="bg-blue-600 hover:bg-blue-700 p-2 rounded-lg transition-all"
                              title="×”×¢×ª×§"
                            >
                              <Icon name="Code" size={16} />
                            </button>
                            
                            {key.status === 'frozen' ? (
                              <button
                                onClick={() => unfreezeKey(key.code)}
                                className="bg-green-600 hover:bg-green-700 p-2 rounded-lg transition-all"
                                title="×”×¤×©×¨"
                              >
                                <Icon name="Play" size={16} />
                              </button>
                            ) : (
                              <button
                                onClick={() => freezeKey(key.code)}
                                className="bg-blue-600 hover:bg-blue-700 p-2 rounded-lg transition-all"
                                title="×”×§×¤×"
                              >
                                <Icon name="Snowflake" size={16} />
                              </button>
                            )}
                            
                            <button
                              onClick={() => {
                                if (confirm(`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª ×”-Key: ${key.code}?`)) {
                                  deleteKey(key.code);
                                }
                              }}
                              className="bg-red-600 hover:bg-red-700 p-2 rounded-lg transition-all"
                              title="××—×§"
                            >
                              <Icon name="Trash2" size={16} />
                            </button>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

ReactDOM.render(<KeyManagementPanel />, document.getElementById('root'));

  </script>
</body>
</html>